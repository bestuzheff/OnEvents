<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>OnEvents</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∏ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ –ø–æ 1–° –≤ –≥–æ—Ä–æ–¥–∞—Ö –†–æ—Å—Å–∏–∏.">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@2.1.0/build/pure-min.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="icons/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/svg+xml" href="icons/favicon.svg">
    <link rel="shortcut icon" href="icons/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <meta name="apple-mobile-web-app-title" content="OnEvents">
    <link rel="manifest" href="icons/site.webmanifest">    
    <!-- Yandex.Metrika counter --> <script type="text/javascript">     (function(m,e,t,r,i,k,a){         m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};         m[i].l=1*new Date();         for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}         k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)     })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=103858050', 'ym');      ym(103858050, 'init', {ssr:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true}); </script> <noscript><div><img src="https://mc.yandex.ru/watch/103858050" style="position:absolute; left:-9999px;" alt="" /></div></noscript> <!-- /Yandex.Metrika counter -->
    <style>
        html { scroll-behavior: smooth; }
        .sr-only {position:absolute!important;width:1px!important;height:1px!important;padding:0!important;margin:-1px!important;overflow:hidden!important;clip:rect(0,0,0,0)!important;white-space:nowrap!important;border:0!important;}

        :root {
            --bg:#fafafa; --text:#111; --muted:#666;
            --card-bg:#fff; --border:#ddd; --shadow:0 2px 4px rgba(0,0,0,.1);
            --header-bg:#222; --header-text:#fff; --footer-bg:#222; --footer-text:#ccc;
            --link:#0b76ef;
        }
        @media (prefers-color-scheme: dark) {
            :root {
                --bg:#0f1115; --text:#e6e6e6; --muted:#a0a0a0;
                --card-bg:#161a22; --border:#2a2f3a; --shadow:0 2px 6px rgba(0,0,0,.35);
                --header-bg:#0b0e14; --header-text:#e6e6e6; --footer-bg:#0b0e14; --footer-text:#a6a6a6;
                --link:#7cb3ff;
            }
        }
        .dark-theme {
            --bg:#0f1115; --text:#e6e6e6; --muted:#a0a0a0;
            --card-bg:#161a22; --border:#2a2f3a; --shadow:0 2px 6px rgba(0,0,0,.35);
            --header-bg:#0b0e14; --header-text:#e6e6e6; --footer-bg:#0b0e14; --footer-text:#a6a6a6;
            --link:#7cb3ff;
        }
        .light-theme {
            --bg:#fafafa; --text:#111; --muted:#666;
            --card-bg:#fff; --border:#ddd; --shadow:0 2px 4px rgba(0,0,0,.1);
            --header-bg:#222; --header-text:#fff; --footer-bg:#222; --footer-text:#ccc;
            --link:#0b76ef;
        }

        body {font-family:'JetBrains Mono', monospace;margin:0;padding:0;background:var(--bg);color:var(--text);word-break:break-word;transition:background .2s,color .2s;}
        a {color:var(--link);} a:hover {color:#a2c8ff !important;}
        header a {color:var(--header-text);} header a:hover {color:#a2c8ff !important; text-decoration:underline;}
        
        /* –¢–µ–º–Ω—ã–π —Å—Ç–∏–ª—å –¥–ª—è –≤—ã–±–æ—Ä–∞ –≥–æ—Ä–æ–¥–∞ –≤ —Ö–µ–¥–µ—Ä–µ */
        #cityFilter {
            background: #333 !important;
            color: #fff !important;
            border-color: #555 !important;
        }
        #cityFilter option {
            background: #333;
            color: #fff;
        }

        header {
            position: sticky; top: 0; z-index: 1000;
            background: var(--header-bg); color: var(--header-text);
            padding: 1em;
        }
        .header-inner {max-width:1000px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:.75rem;}
        .logo {font-size:1.75em;font-weight:bold; display: flex; align-items: center;}
        .logo-onevents {height: 32px; width: auto;}
        
        @media (max-width: 600px) {
            .header-inner {
                flex-direction: row;
                align-items: center;
                gap: .75rem;
                flex-wrap: nowrap;
            }
            .logo {
                font-size: 1.75em;
                width: auto;
                justify-content: flex-start;
            }
            .logo-onevents {
                height: 28px;
            }
            #headerControls {
                display: flex;
                width: auto;
                margin-left: auto;
                justify-content: flex-end;
                gap: .5rem;
                flex-wrap: nowrap;
            }
        }
        nav {display:flex;gap:1em;align-items:center;}
        .theme-toggle {appearance:none;background:transparent;border:none;padding:0;margin:0;line-height:1;font-size:1.15em;color:var(--header-text);cursor:pointer;}
        
        /* –ë—É—Ä–≥–µ—Ä-–º–µ–Ω—é */
        .burger-container {
            position: relative;
        }
        .burger-menu-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            color: var(--header-text);
            font-size: 1.5rem;
            box-sizing: border-box;
            width: 2.5rem;
            height: 2.5rem;
        }
        .burger-menu-btn:hover {
            opacity: 0.8;
        }
        .mobile-menu {
            display: none;
            position: absolute;
            top: calc(100% + 0.5rem);
            right: 0;
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 0.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 999;
            min-width: 180px;
        }
        .mobile-menu nav {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            width: 100%;
        }
        .mobile-menu nav a {
            display: block;
            padding: 0.5rem 0.75rem;
            color: var(--text);
            text-decoration: none;
            border-radius: 4px;
            transition: all 0.2s;
            font-size: 0.95em;
        }
        .mobile-menu nav a:hover {
            background: var(--border);
            color: var(--link);
        }
        .mobile-menu.open {
            display: block;
        }
        /* –§–∏–ª—å—Ç—Ä –≥–æ—Ä–æ–¥–∞ –≤–Ω—É—Ç—Ä–∏ –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é */
        .mobile-menu .city-filter-wrapper { padding: 0.25rem 0.5rem 0.5rem; }
        .mobile-menu #cityFilter { width: 100%; }
        nav.main-nav {
            display: none;
        }

        .container {max-width:1000px;margin:2em auto;padding:0 1em;}
        article.card {background:var(--card-bg);border:1px solid var(--border);border-radius:8px;padding:1.25em;margin-bottom:1.5em;box-shadow:var(--shadow);} 
        .card-header {display:flex;align-items:center;gap:.75em;margin-bottom:.75em;}
        .card-title {margin:0;font-size:1.5em;}
        .meta {display:block;margin:.25em 0 .5em 0;}
        .meta-item {font-size:.95em;color:var(--muted);display:flex;align-items:baseline;margin:.15em 0;}
        .meta-item .icon {margin-right:.35em;}
        .map-link {display:block;margin-top:.25em;text-decoration:none;font-size:0.9em;opacity:0.8;transition:opacity 0.2s;color:var(--link);}
        .map-link:hover {opacity:1;text-decoration:underline;}
        footer {background:var(--footer-bg);color:var(--footer-text);text-align:center;padding:1em;margin-top:2em;font-size:.9em;}

        .grid {display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));}

        .icon svg {width:20px;height:20px;fill:currentColor;}

        #about { scroll-margin-top: 80px; }
        #public-calendars { scroll-margin-top: 80px; }
        
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –±–ª–æ–∫–∞ –ø—É–±–ª–∏—á–Ω—ã—Ö –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–π */
        .calendar-item {
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .calendar-city-name {
            color: var(--text);
            width: 140px;
            flex-shrink: 0;
            text-align: left;
        }
        .calendar-input-group {
            position: relative;
            flex: 1;
            max-width: calc(100% - 160px);
        }
        .calendar-input {
            width: 100%;
            padding: 0.5rem 2.5rem 0.5rem 0.75rem;
            border: 1px solid var(--border);
            border-radius: 4px;
            background: var(--bg);
            color: var(--text);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85em;
            word-break: break-all;
            box-sizing: border-box;
        }
        .calendar-copy-btn {
            position: absolute;
            right: 0.5rem;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.25rem;
            border-radius: 3px;
            color: var(--muted);
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
            font-size: 14px;
        }
        .calendar-copy-btn:hover {
            color: var(--link);
            background: var(--border);
        }
        .calendar-copy-btn:active {
            transform: translateY(-50%) scale(0.9);
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏ —Å–æ–±—ã—Ç–∏—è */
        .event-copy-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.25rem;
            border-radius: 3px;
            color: var(--muted);
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
            font-size: 14px;
            z-index: 10;
        }
        .event-copy-btn:hover {
            color: var(--link);
            background: var(--border);
        }
        .event-copy-btn:active {
            transform: scale(0.9);
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π —Å —Å–æ–±—ã—Ç–∏—è–º–∏ */
        .event-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }
        
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —è–∫–æ—Ä–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ */
        .card {
            scroll-margin-top: 100px;
            position: relative;
        }
        .card.highlighted {
            border-color: var(--link);
            box-shadow: 0 0 0 2px rgba(123, 179, 255, 0.2);
        }
    </style>
</head>
<body>
<div id="top"></div>
<script>(function initTheme(){try{const saved=localStorage.getItem('theme');const root=document.documentElement;if(saved==='dark'){root.classList.add('dark-theme');}else if(saved==='light'){root.classList.add('light-theme');}}catch(e){}})();</script>

<header role="banner">
  <div class="header-inner">
    <div class="logo">
      <img class="logo-onevents" src="icons/web-app-manifest-192x192.png">
      OnEvents
    </div>
    <div id="headerControls" style="display: flex; align-items: center; gap: 1rem;">
      <label for="cityFilter" class="sr-only">–§–∏–ª—å—Ç—Ä –ø–æ –≥–æ—Ä–æ–¥—É</label>
      <select id="cityFilter" class="pure-input">
        <option value="">–í—Å–µ –≥–æ—Ä–æ–¥–∞</option>
      </select>
      <button class="theme-toggle" id="themeToggle" type="button" aria-pressed="false" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É"><span id="themeIcon">üåì</span></button>
      <div class="burger-container">
        <button class="burger-menu-btn" id="burgerMenuBtn" type="button" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">‚ò∞</button>
        <div class="mobile-menu" id="mobileMenu">
          <nav>
            <div id="mobileCityFilterWrapper" class="city-filter-wrapper"></div>
            <a href="#top" class="mobile-menu-link">–°–æ–±—ã—Ç–∏—è</a>
            <a href="#public-calendars" class="mobile-menu-link">–ö–∞–ª–µ–Ω–¥–∞—Ä–∏</a>
            <a href="#about" class="mobile-menu-link">–û –ø—Ä–æ–µ–∫—Ç–µ</a>
          </nav>
        </div>
      </div>
    </div>
  </div>
</header>

<main class="container">
  <h1 class="sr-only">–ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å–æ–±—ã—Ç–∏–π OnEvents</h1>

  <div id="events">
    {{ events }}
  </div>

  <!-- –ë–ª–æ–∫ –ø—É–±–ª–∏—á–Ω—ã—Ö –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–π -->
  <section id="public-calendars">
    {{ public_calendars }}
  </section>

  <!-- –ë–ª–æ–∫ –û –ø—Ä–æ–µ–∫—Ç–µ -->
   
  <section id="about">
    <h2>–û –ø—Ä–æ–µ–∫—Ç–µ</h2>

    <article class="card">
      <div class="card-header"><span class="icon">üéØ</span><h3 class="card-title">–ú–∏—Å—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞</h3></div>
      <p>–ú—ã —Å–æ–∑–¥–∞–µ–º –µ–¥–∏–Ω–æ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è –≤—Å–µ—Ö, –∫—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π 1–°:–ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ. –ù–∞—à–∞ —Ü–µ–ª—å ‚Äî –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å —Å–æ–æ–±—â–µ—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–æ–≤ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–≤ –∏–º —É–¥–æ–±–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è –æ–±–º–µ–Ω–∞ –∑–Ω–∞–Ω–∏—è–º–∏ –∏ –æ–ø—ã—Ç–æ–º.</p>
    </article>

    <h3>–ß—Ç–æ –º—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º</h3>
    <div class="grid">
      <article class="card"><div class="card-header"><span class="icon">üìÖ</span><h4 class="card-title">–ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å–æ–±—ã—Ç–∏–π</h4></div><p>–ê–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è—Ö, –º–∏—Ç–∞–ø–∞—Ö –∏ –≤—Å—Ç—Ä–µ—á–∞—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤–∞.</p></article>
      <article class="card"><div class="card-header"><span class="icon">ü§ù</span><h4 class="card-title">–°–æ–æ–±—â–µ—Å—Ç–≤–æ</h4></div><p>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞–π—Ç–∏ –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤ –∏ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–∏–º –æ–ø—ã—Ç–æ–º —Å –∫–æ–ª–ª–µ–≥–∞–º–∏.</p></article>
      <article class="card"><div class="card-header"><span class="icon">üåê</span><h4 class="card-title">–û—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å</h4></div><p>–ü—Ä–æ–µ–∫—Ç —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º, –≥–¥–µ –∫–∞–∂–¥—ã–π –º–æ–∂–µ—Ç –≤–Ω–µ—Å—Ç–∏ —Å–≤–æ–π –≤–∫–ª–∞–¥.</p></article>
      <article class="card"><div class="card-header"><span class="icon">üí¨</span><h4 class="card-title">Telegram</h4></div><p>–í—Å–µ —Å–æ–±—ã—Ç–∏—è –¥—É–±–ª–∏—Ä—É–µ–º –∏ –≤ <a href="https://t.me/OnEvents" target="_blank">Telegram</a> ‚Äî –ø–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å!</p></article>
      <article class="card"><div class="card-header"><span class="icon">üí¨</span><h4 class="card-title">–≤–∫–æ–Ω—Ç–∞–∫—Ç–µ</h4></div><p>–¢–µ–ø–µ—Ä—å —É –Ω–∞—Å –µ—Å—Ç—å –≥—Ä—É–ø–ø–∞ <a href="https://vk.com/onevents_ru" target="_blank">–≤–∫–æ–Ω—Ç–∞–∫—Ç–µ</a></p></article>
    </div>

    <h3>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h3>
    <div class="grid">
      <article class="card"><div class="card-header"><span class="icon">üìù</span><h4 class="card-title">–°–æ–∑–¥–∞–Ω–∏–µ</h4></div><p>–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Å–æ–±—ã—Ç–∏—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –ø–∞–ø–∫–µ.</p></article>
      <article class="card"><div class="card-header"><span class="icon">üîç</span><h4 class="card-title">–ü—Ä–æ–≤–µ—Ä–∫–∞</h4></div><p>–ù–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.</p></article>
      <article class="card"><div class="card-header"><span class="icon">üöÄ</span><h4 class="card-title">–ü—É–±–ª–∏–∫–∞—Ü–∏—è</h4></div><p>–°–æ–±—ã—Ç–∏–µ –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ –∏ —Å—Ç–∞–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ —Å–æ–æ–±—â–µ—Å—Ç–≤—É.</p></article>
      <article class="card"><div class="card-header"><span class="icon">üòé</span><h4 class="card-title">–î–ª—è –ª–µ–Ω–∏–≤—ã—Ö</h4></div><p>–ü—Ä–æ—Å—Ç–æ –ø—Ä–∏—à–ª–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –æ —Å–æ–±—ã—Ç–∏–∏ –Ω–∞–º –Ω–∞ –ø–æ—á—Ç—É.</p></article>
    </div>

    <article class="card">
      <div class="card-header"><span class="icon">üì¨</span><h3 class="card-title">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3></div>
      <ul>
        <li><a href="https://github.com/bestuzheff/OnEvents" target="_blank">GitHub</a></li>
        <li><a href="mailto:info@onevents.ru">info@onevents.ru</a></li>
        <li><a href="https://t.me/Un_tru" target="_blank">@Un_tru</a></li>
        <li><a href="https://t.me/bestuzheff" target="_blank">@bestuzheff</a></li>
      </ul>
    </article>
  </section>
</main>

<footer role="contentinfo"><small>¬© OnEvents, 2025. –î–∞—Ç–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏: {{ builddate }}</small></footer>

<script>(function themeToggle(){const btn=document.getElementById('themeToggle');const icon=document.getElementById('themeIcon');const root=document.documentElement;function isDark(){return root.classList.contains('dark-theme');}function setTheme(mode){if(mode==='dark'){root.classList.remove('light-theme');root.classList.add('dark-theme');btn.setAttribute('aria-pressed','true');icon.textContent='‚òÄÔ∏è';}else{root.classList.remove('dark-theme');root.classList.add('light-theme');btn.setAttribute('aria-pressed','false');icon.textContent='üåô';}try{localStorage.setItem('theme',mode);}catch(e){}}btn.addEventListener('click',function(e){e.preventDefault();setTheme(isDark()?'light':'dark');});try{const saved=localStorage.getItem('theme');if(saved==='dark'){icon.textContent='‚òÄÔ∏è';btn.setAttribute('aria-pressed','true');}else if(saved==='light'){icon.textContent='üåô';btn.setAttribute('aria-pressed','false');}else{if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches){icon.textContent='‚òÄÔ∏è';btn.setAttribute('aria-pressed','true');}else{icon.textContent='üåô';btn.setAttribute('aria-pressed','false');}}}catch(e){}})();</script>
<script>
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener("click", function(e) {
    const targetId = this.getAttribute("href").substring(1);
    if (!targetId) return;
    
    const targetEl = document.getElementById(targetId);
    if (targetEl) {
      e.preventDefault();
      
      // –ü–æ–ª—É—á–∞–µ–º –≤—ã—Å–æ—Ç—É —Ö–µ–¥–µ—Ä–∞
      const header = document.querySelector('header');
      const headerHeight = header ? header.offsetHeight : 0;
      
      // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
      const isMobile = window.innerWidth <= 600;
      const extraOffset = isMobile ? 40 : 20; // –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø
      
      // –í—ã—á–∏—Å–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é —Å —É—á–µ—Ç–æ–º –≤—ã—Å–æ—Ç—ã —Ö–µ–¥–µ—Ä–∞ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ—Ç—Å—Ç—É–ø–∞
      const targetPosition = targetEl.offsetTop - headerHeight - extraOffset;
      
      // –ü–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª –∫ –≤—ã—á–∏—Å–ª–µ–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏
      window.scrollTo({
        top: Math.max(0, targetPosition),
        behavior: "smooth"
      });
      
      // –û–±–Ω–æ–≤–ª—è–µ–º URL
      history.pushState(null, "", "#" + targetId);
    }
  });
});
</script>
<script>
(function cityFilterInit(){
  const SELECT_ID = 'cityFilter';
  function getCards(){ return Array.from(document.querySelectorAll('article.card[data-city]')); }
  function getCalendarItems(){ return Array.from(document.querySelectorAll('.calendar-item[data-city]')); }
  function uniqueCities(){
    const set = new Set(getCards().map(c => (c.getAttribute('data-city')||'').trim()).filter(Boolean));
    return Array.from(set).sort((a,b) => a.localeCompare(b, 'ru'));
  }
  function buildOptions(){
    const sel = document.getElementById(SELECT_ID);
    if(!sel) return;
    const existing = new Set(Array.from(sel.options).map(o=>o.value));
    uniqueCities().forEach(city => {
      if(!existing.has(city)){
        const opt = document.createElement('option');
        opt.value = city;
        opt.textContent = city;
        sel.appendChild(opt);
      }
    });
  }
  function applyFilter(city){
    const cards = getCards();
    const calendarItems = getCalendarItems();
    
    cards.forEach(card => {
      const c = (card.getAttribute('data-city')||'').trim();
      card.style.display = (!city || c === city) ? '' : 'none';
    });
    
    calendarItems.forEach(item => {
      const c = (item.getAttribute('data-city')||'').trim();
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞–ª–µ–Ω–¥–∞—Ä—å –µ—Å–ª–∏:
      // 1. –ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞ (–ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ)
      // 2. –≠—Ç–æ –æ–±—â–∏–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å (data-city="")
      // 3. –ì–æ—Ä–æ–¥ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ñ–∏–ª—å—Ç—Ä–æ–º
      item.style.display = (!city || c === '' || c === city) ? '' : 'none';
    });
  }
  function loadSaved(){
    try { return localStorage.getItem('cityFilter') || ''; } catch(e){ return ''; }
  }
  function saveSelected(val){
    try { localStorage.setItem('cityFilter', val || ''); } catch(e){}
  }
  function onChange(e){
    const val = e.target.value;
    saveSelected(val);
    applyFilter(val);
    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –≥–æ—Ä–æ–¥–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
    const mobileMenu = document.getElementById('mobileMenu');
    const burgerBtn = document.getElementById('burgerMenuBtn');
    const isMobile = window.innerWidth <= 600;
    if (isMobile && mobileMenu && mobileMenu.contains(e.target)) {
      mobileMenu.classList.remove('open');
      if (burgerBtn) burgerBtn.textContent = '‚ò∞';
    }
  }
  function init(){
    const sel = document.getElementById(SELECT_ID);
    if(!sel) return;
    buildOptions();
    const saved = loadSaved();
    if(saved){
      sel.value = saved;
    }
    sel.addEventListener('change', onChange);
    applyFilter(sel.value || '');
  }
  if(document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>

<script>
// –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–æ–∫ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–π
(function copyCalendarLinks() {
  function copyToClipboard(text) {
    if (navigator.clipboard) {
      return navigator.clipboard.writeText(text);
    } else {
      // Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
      const textArea = document.createElement('textarea');
      textArea.value = text;
      document.body.appendChild(textArea);
      textArea.focus();
      textArea.select();
      try {
        document.execCommand('copy');
        return Promise.resolve();
      } catch (err) {
        return Promise.reject(err);
      } finally {
        document.body.removeChild(textArea);
      }
    }
  }

  function initCopyButtons() {
    document.querySelectorAll('.calendar-copy-btn').forEach(btn => {
      btn.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        const input = this.closest('.calendar-input-group').querySelector('.calendar-input');
        const url = input.value;
        
        copyToClipboard(url).then(() => {
          // –í—Ä–µ–º–µ–Ω–Ω–∞—è —Å–º–µ–Ω–∞ –∏–∫–æ–Ω–∫–∏ –Ω–∞ –≥–∞–ª–æ—á–∫—É
          const originalText = this.textContent;
          this.textContent = '‚úì';
          this.style.color = 'var(--link)';
          
          setTimeout(() => {
            this.textContent = originalText;
            this.style.color = '';
          }, 2000);
        }).catch(() => {
          // Fallback - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º URL –≤ alert
          alert('–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É: ' + url);
        });
      });
    });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initCopyButtons);
  } else {
    initCopyButtons();
  }
})();
</script>

<script>
// –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–æ–∫ —Å–æ–±—ã—Ç–∏–π
(function copyEventLinks() {
  function copyToClipboard(text) {
    if (navigator.clipboard) {
      return navigator.clipboard.writeText(text);
    } else {
      // Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
      const textArea = document.createElement('textarea');
      textArea.value = text;
      document.body.appendChild(textArea);
      textArea.focus();
      textArea.select();
      try {
        document.execCommand('copy');
        return Promise.resolve();
      } catch (err) {
        return Promise.reject(err);
      } finally {
        document.body.removeChild(textArea);
      }
    }
  }

  function initEventCopyButtons() {
    document.querySelectorAll('.event-copy-btn').forEach(btn => {
      btn.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        const eventId = this.getAttribute('data-event-id');
        const url = `${window.location.origin}${window.location.pathname}#${eventId}`;
        
        copyToClipboard(url).then(() => {
          // –í—Ä–µ–º–µ–Ω–Ω–∞—è —Å–º–µ–Ω–∞ –∏–∫–æ–Ω–∫–∏ –Ω–∞ –≥–∞–ª–æ—á–∫—É
          const originalText = this.textContent;
          this.textContent = '‚úì';
          this.style.color = 'var(--link)';
          
          setTimeout(() => {
            this.textContent = originalText;
            this.style.color = '';
          }, 2000);
        }).catch(() => {
          // Fallback - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º URL –≤ alert
          alert('–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É: ' + url);
        });
      });
    });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initEventCopyButtons);
  } else {
    initEventCopyButtons();
  }
})();
</script>

<script>
// –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é
(function burgerMenu() {
  const burgerBtn = document.getElementById('burgerMenuBtn');
  const mobileMenu = document.getElementById('mobileMenu');
  
  if (!burgerBtn || !mobileMenu) return;
  
  burgerBtn.addEventListener('click', function(e) {
    e.preventDefault();
    e.stopPropagation();
    mobileMenu.classList.toggle('open');
    
    // –ú–µ–Ω—è–µ–º –∏–∫–æ–Ω–∫—É
    const icon = this.textContent;
    this.textContent = icon === '‚ò∞' ? '‚úï' : '‚ò∞';
  });
  
  // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ –∏–ª–∏ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É
  document.addEventListener('click', function(e) {
    if (!mobileMenu.contains(e.target) && e.target !== burgerBtn) {
      mobileMenu.classList.remove('open');
      burgerBtn.textContent = '‚ò∞';
    }
  });
  
  // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫–∏
  mobileMenu.querySelectorAll('.mobile-menu-link').forEach(link => {
    link.addEventListener('click', function() {
      mobileMenu.classList.remove('open');
      burgerBtn.textContent = '‚ò∞';
    });
  });
})();
</script>


<script>
// –ü–µ—Ä–µ–Ω–æ—Å —Ñ–∏–ª—å—Ç—Ä–∞ –≥–æ—Ä–æ–¥–∞ –≤ –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
(function relocateCityFilter(){
  const MOBILE_MAX = 600;
  const selectEl = document.getElementById('cityFilter');
  const headerControls = document.getElementById('headerControls');
  const themeToggle = document.getElementById('themeToggle');
  const mobileMenu = document.getElementById('mobileMenu');
  if (!selectEl || !headerControls || !mobileMenu) return;

  const nav = mobileMenu.querySelector('nav');
  let mobileWrapper = document.getElementById('mobileCityFilterWrapper');
  if (!mobileWrapper && nav) {
    mobileWrapper = document.createElement('div');
    mobileWrapper.id = 'mobileCityFilterWrapper';
    mobileWrapper.className = 'city-filter-wrapper';
    nav.insertBefore(mobileWrapper, nav.firstChild);
  }

  function updatePlacement(){
    const isMobile = window.innerWidth <= MOBILE_MAX;
    if (isMobile) {
      if (mobileWrapper && selectEl.parentElement !== mobileWrapper) {
        mobileWrapper.appendChild(selectEl);
      }
    } else {
      if (selectEl.parentElement !== headerControls) {
        if (themeToggle && themeToggle.parentElement === headerControls) {
          headerControls.insertBefore(selectEl, themeToggle);
        } else {
          headerControls.appendChild(selectEl);
        }
      }
    }
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', updatePlacement);
  } else {
    updatePlacement();
  }
  window.addEventListener('resize', updatePlacement);
})();
</script>

<script>
// –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ —è–∫–æ—Ä–Ω–æ–π —Å—Å—ã–ª–∫–µ
(function highlightEvents() {
  // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ —è–∫–æ—Ä–Ω–æ–π —Å—Å—ã–ª–∫–µ
  function highlightEventFromHash() {
    const hash = window.location.hash;
    if (hash && hash.startsWith('#event-')) {
      const eventElement = document.querySelector(hash);
      if (eventElement) {
        // –£–±–∏—Ä–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â—É—é –ø–æ–¥—Å–≤–µ—Ç–∫—É
        document.querySelectorAll('.card.highlighted').forEach(el => {
          el.classList.remove('highlighted');
        });
        
        // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É –∫ —Ç–µ–∫—É—â–µ–º—É —Å–æ–±—ã—Ç–∏—é
        eventElement.classList.add('highlighted');
        
        // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø–æ–∑–∏—Ü–∏—é —Å–∫—Ä–æ–ª–ª–∞ —Å —É—á–µ—Ç–æ–º —Ö–µ–¥–µ—Ä–∞
        setTimeout(() => {
          const header = document.querySelector('header');
          const headerHeight = header ? header.offsetHeight : 0;
          const isMobile = window.innerWidth <= 600;
          const extraOffset = isMobile ? 40 : 20;
          const targetPosition = eventElement.offsetTop - headerHeight - extraOffset;
          
          window.scrollTo({
            top: Math.max(0, targetPosition),
            behavior: "smooth"
          });
        }, 100); // –Ω–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã
        
        // –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(() => {
          eventElement.classList.remove('highlighted');
        }, 3000);
      }
    }
  }

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', highlightEventFromHash);
  } else {
    highlightEventFromHash();
  }

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ö–µ—à–∞ –≤ URL
  window.addEventListener('hashchange', highlightEventFromHash);
})();
</script>
</body>
</html>
